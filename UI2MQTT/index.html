<!DOCTYPE html>
<html>
<body style="font-size: 40px; padding: 30px;">
    <h1>React/WebView MQTT (Architect's idea)</h1>
    <div id="counter">Messages received: 0</div>
    <div id="log"></div>

    <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
    <script>
        let count = 0;
        const client = mqtt.connect('wss://test.mosquitto.org:8081/mqtt');

        client.on('connect', () => {
            document.body.style.backgroundColor = '#d4edda';
            client.subscribe('patient/monitor/poc');
        });

        client.on('message', (topic, message) => {
            count++;
            document.getElementById('counter').innerHTML = `Messages received: ${count}`;
            const div = document.createElement('div');
            div.textContent = `${new Date().toLocaleTimeString()} â†’ ${message.toString()}`;
            document.getElementById('log').prepend(div);
        });

        client.on('offline', () => {
            document.body.style.backgroundColor = '#f8d7da';
        });
    </script>
</body>
</html>
